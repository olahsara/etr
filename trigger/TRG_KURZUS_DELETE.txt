create trigger TRG_KURZUS_DELETE
    instead of delete
    on "Kurzus"
    for each row
    COMPOUND TRIGGER

    TYPE my_table_type IS TABLE OF ADATB."Hallgato".HALLGATO_ID%TYPE;
    my_data my_table_type;
    kur_id NUMBER;

    AFTER EACH ROW IS
    BEGIN
        kur_id := :old.KURZUS_ID;
        SELECT "ko_Ora_id" BULK COLLECT INTO my_data FROM "Kuzus_Ora" WHERE "ko_Kurzus_id" = :old.KURZUS_ID;
        DELETE "Kuzus_Ora" WHERE "ko_Kurzus_id" = :old.KURZUS_ID;
    END AFTER EACH ROW;

    AFTER STATEMENT IS
    BEGIN
        FORALL  i in  my_data.FIRST..my_data.LAST DELETE FROM "Ora" WHERE "Ora".ORA_ID = my_data(i);
    END AFTER STATEMENT;
END;
/


create trigger TRG_KURZUS_DELETE
    after delete
    on "Kuzus_Ora"
    for each row
    BEGIN
        DELETE FROM "Ora" WHERE ORA_ID=:OLD."ko_Ora_id";
    END;
/


CREATE OR REPLACE TRIGGER trg_kurzus_delete
    FOR DELETE ON "Kurzus"
    COMPOUND TRIGGER

    TYPE kur_ids_t IS TABLE OF NUMBER;
    kur_ids kur_ids_t := kur_ids_t();

    BEFORE EACH ROW IS
        BEGIN
            SELECT "ko_Ora_id" BULK COLLECT INTO kur_ids FROM "Kuzus_Ora" WHERE "ko_Kurzus_id" = :old."KURZUS_ID";
    END BEFORE EACH ROW;

    AFTER STATEMENT IS
        BEGIN
        FORALL  i in  kur_ids.FIRST..kur_ids.LAST DELETE "Ora" WHERE ORA_ID = kur_ids(i);


    END AFTER STATEMENT;

END trg_kurzus_delete;
/



